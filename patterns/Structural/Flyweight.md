# ü™∂ **–ü–∞—Ç—Ç–µ—Ä–Ω "–õ–µ–≥–∫–æ–≤–µ—Å" (Flyweight) –≤ TypeScript**  

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞—Ç—Ç–µ—Ä–Ω "–õ–µ–≥–∫–æ–≤–µ—Å" (Flyweight)?**  

**–õ–µ–≥–∫–æ–≤–µ—Å (Flyweight)** ‚Äî —ç—Ç–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **—ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å**, **—Ä–∞–∑–¥–µ–ª—è—è –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç** –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.  

üìå **–ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è:**  
- –ï—Å–ª–∏ —É –≤–∞—Å **–æ—á–µ–Ω—å –º–Ω–æ–≥–æ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**, –æ–Ω–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å **—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏**.  
- –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã **—Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã**, –º—ã **–∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ**, –µ—Å–ª–∏ –æ–Ω–∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ**.  
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç, –≥—Ä–∞—Ñ–∏–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤).  

---

## üî• **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–õ–µ–≥–∫–æ–≤–µ—Å"?**  

‚úÖ **–ö–æ–≥–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**.  
‚úÖ **–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**.  
‚úÖ **–ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ (—Ä–∞–∑–¥–µ–ª—è–µ–º—ã–µ) –∏ –∏–∑–º–µ–Ω—è–µ–º—ã–µ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ) —á–∞—Å—Ç–∏**.  
‚úÖ **–ö–æ–≥–¥–∞ –¥–æ—Ä–æ–≥–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ**.  

---

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ "–õ–µ–≥–∫–æ–≤–µ—Å–∞"**  

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º **–∏–≥—Ä—É**, –≥–¥–µ –Ω–∞ –∫–∞—Ä—Ç–µ **—Ç—ã—Å—è—á–∏ –¥–µ—Ä–µ–≤—å–µ–≤** üå≥.  
–ï—Å–ª–∏ –∫–∞–∂–¥–æ–µ –¥–µ—Ä–µ–≤–æ —Ö—Ä–∞–Ω–∏—Ç **—Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä—É, —Ç–∏–ø**, –∞ —Ç–∞–∫–∂–µ **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**, —Ç–æ –ø–∞–º—è—Ç–∏ –º–æ–∂–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∏—Ç—å.  

```typescript
class Tree {
    constructor(
        public type: string,
        public color: string,
        public texture: string,
        public x: number,
        public y: number
    ) {}

    draw(): void {
        console.log(`üå≥ –î–µ—Ä–µ–≤–æ —Ç–∏–ø–∞ "${this.type}", —Ü–≤–µ—Ç "${this.color}" –Ω–∞ (${this.x}, ${this.y})`);
    }
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1000 –¥–µ—Ä–µ–≤—å–µ–≤ (–ø—Ä–æ–±–ª–µ–º–∞: —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–∏–ø, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä–∞)
const trees: Tree[] = [];
for (let i = 0; i < 1000; i++) {
    trees.push(new Tree("Oak", "Green", "Leafy", Math.random() * 100, Math.random() * 100));
}
```

üìå **–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –∫–∞–∂–¥–æ–µ –¥–µ—Ä–µ–≤–æ –∑–∞–Ω–∏–º–∞–µ—Ç 100 –±–∞–π—Ç, —Ç–æ **1000 –¥–µ—Ä–µ–≤—å–µ–≤ = 100 000 –±–∞–π—Ç (‚âà100 –ö–ë)**!  

---

## ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º "–õ–µ–≥–∫–æ–≤–µ—Å"**  

### **1Ô∏è‚É£ –†–∞–∑–¥–µ–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞:**  
- **–û–±—â–∏–µ** (—Ä–∞–∑–¥–µ–ª—è–µ–º—ã–µ) ‚Äì —Ç–∏–ø, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä–∞ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö –¥–µ—Ä–µ–≤—å–µ–≤).  
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ** ‚Äì –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `x, y` (—Ä–∞–∑–Ω—ã–µ —É –∫–∞–∂–¥–æ–≥–æ –¥–µ—Ä–µ–≤–∞).  

---

### **2Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º "–õ–µ–≥–∫–æ–≤–µ—Å" (–æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤–∞)**  

```typescript
class TreeType {
    constructor(public type: string, public color: string, public texture: string) {}

    draw(x: number, y: number): void {
        console.log(`üå≥ –î–µ—Ä–µ–≤–æ —Ç–∏–ø–∞ "${this.type}", —Ü–≤–µ—Ç "${this.color}" –Ω–∞ (${x}, ${y})`);
    }
}
```

---

### **3Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º —Ñ–∞–±—Ä–∏–∫—É "–õ–µ–≥–∫–æ–≤–µ—Å–æ–≤" (TreeFactory)**  

```typescript
class TreeFactory {
    private static treeTypes: Map<string, TreeType> = new Map();

    static getTreeType(type: string, color: string, texture: string): TreeType {
        const key = `${type}_${color}_${texture}`;
        if (!this.treeTypes.has(key)) {
            console.log(`–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: ${key}`);
            this.treeTypes.set(key, new TreeType(type, color, texture));
        }
        return this.treeTypes.get(key)!;
    }
}
```

---

### **4Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–µ–º "–õ–µ–≥–∫–æ–≤–µ—Å" –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**  

```typescript
class Tree {
    constructor(private treeType: TreeType, private x: number, private y: number) {}

    draw(): void {
        this.treeType.draw(this.x, this.y);
    }
}
```

---

### **5Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º –¥–µ—Ä–µ–≤—å—è —Å "–õ–µ–≥–∫–æ–≤–µ—Å–æ–º"**  

```typescript
const trees: Tree[] = [];

for (let i = 0; i < 1000; i++) {
    const treeType = TreeFactory.getTreeType("Oak", "Green", "Leafy"); // –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç!
    trees.push(new Tree(treeType, Math.random() * 100, Math.random() * 100));
}

// –†–∏—Å—É–µ–º –¥–µ—Ä–µ–≤—å—è
trees.forEach(tree => tree.draw());
```

### üñ• **–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å**  

```
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: Oak_Green_Leafy
üå≥ –î–µ—Ä–µ–≤–æ —Ç–∏–ø–∞ "Oak", —Ü–≤–µ—Ç "Green" –Ω–∞ (23.5, 67.8)
üå≥ –î–µ—Ä–µ–≤–æ —Ç–∏–ø–∞ "Oak", —Ü–≤–µ—Ç "Green" –Ω–∞ (12.1, 88.4)
üå≥ –î–µ—Ä–µ–≤–æ —Ç–∏–ø–∞ "Oak", —Ü–≤–µ—Ç "Green" –Ω–∞ (99.3, 24.7)
...
```

---

## üî• **–ß—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏?**  

‚úÖ **–¢–µ–ø–µ—Ä—å —É –≤—Å–µ—Ö –¥–µ—Ä–µ–≤—å–µ–≤ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ (`TreeType`)**.  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏**: –≤–º–µ—Å—Ç–æ 1000 –æ–±—ä–µ–∫—Ç–æ–≤ **"—Ç–∏–ø–∞"** —É –Ω–∞—Å —Ç–æ–ª—å–∫–æ **1**!  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–µ—Ä–µ–≤—å–µ–≤ –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∫–æ–¥–∞.  

---

## üìå **–î—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–®—Ä–∏—Ñ—Ç—ã)**  

–í —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ Word –∏–ª–∏ Google Docs, –∫–∞–∂–¥–∞—è **–±—É–∫–≤–∞** –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è **—Ç—ã—Å—è—á–∏ —Ä–∞–∑**.  
–ï—Å–ª–∏ **–∫–∞–∂–¥—É—é –±—É–∫–≤—É —Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ**, —ç—Ç–æ **–æ–≥—Ä–æ–º–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏**.  

### **1Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º "–õ–µ–≥–∫–æ–≤–µ—Å" –¥–ª—è –±—É–∫–≤**  

```typescript
class Letter {
    constructor(public char: string, public font: string, public size: number) {}

    draw(x: number, y: number): void {
        console.log(`üìù –°–∏–º–≤–æ–ª "${this.char}" –≤ —à—Ä–∏—Ñ—Ç–µ "${this.font}", —Ä–∞–∑–º–µ—Ä ${this.size} –Ω–∞ (${x}, ${y})`);
    }
}
```

### **2Ô∏è‚É£ –§–∞–±—Ä–∏–∫–∞ –±—É–∫–≤**  

```typescript
class LetterFactory {
    private static letters: Map<string, Letter> = new Map();

    static getLetter(char: string, font: string, size: number): Letter {
        const key = `${char}_${font}_${size}`;
        if (!this.letters.has(key)) {
            console.log(`–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: ${key}`);
            this.letters.set(key, new Letter(char, font, size));
        }
        return this.letters.get(key)!;
    }
}
```

### **3Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–µ–º "–õ–µ–≥–∫–æ–≤–µ—Å" –¥–ª—è —Ç–µ–∫—Å—Ç–∞**  

```typescript
class DocumentSymbol {
    constructor(private letter: Letter, private x: number, private y: number) {}

    draw(): void {
        this.letter.draw(this.x, this.y);
    }
}

// –°–æ–∑–¥–∞—ë–º –¥–æ–∫—É–º–µ–Ω—Ç
const documentText: DocumentSymbol[] = [];

const text = "HELLO";
for (let i = 0; i < text.length; i++) {
    const letter = LetterFactory.getLetter(text[i], "Arial", 12);
    documentText.push(new DocumentSymbol(letter, i * 10, 0));
}

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—Å—Ç
documentText.forEach(symbol => symbol.draw());
```

### üñ• **–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å**  

```
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: H_Arial_12
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: E_Arial_12
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: L_Arial_12
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: O_Arial_12
üìù –°–∏–º–≤–æ–ª "H" –≤ —à—Ä–∏—Ñ—Ç–µ "Arial", —Ä–∞–∑–º–µ—Ä 12 –Ω–∞ (0, 0)
üìù –°–∏–º–≤–æ–ª "E" –≤ —à—Ä–∏—Ñ—Ç–µ "Arial", —Ä–∞–∑–º–µ—Ä 12 –Ω–∞ (10, 0)
üìù –°–∏–º–≤–æ–ª "L" –≤ —à—Ä–∏—Ñ—Ç–µ "Arial", —Ä–∞–∑–º–µ—Ä 12 –Ω–∞ (20, 0)
üìù –°–∏–º–≤–æ–ª "L" –≤ —à—Ä–∏—Ñ—Ç–µ "Arial", —Ä–∞–∑–º–µ—Ä 12 –Ω–∞ (30, 0)
üìù –°–∏–º–≤–æ–ª "O" –≤ —à—Ä–∏—Ñ—Ç–µ "Arial", —Ä–∞–∑–º–µ—Ä 12 –Ω–∞ (40, 0)
```

---

## üìä **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–õ–µ–≥–∫–æ–≤–µ—Å"?**  

‚úÖ **–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**.  
‚úÖ **–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**.  
‚úÖ **–ö–æ–≥–¥–∞ –µ—Å—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∏ –∏–∑–º–µ–Ω—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–±—ä–µ–∫—Ç–µ**.  
‚úÖ **–ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç–∞–º–∏ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É**.  

---

## üé¨ **–í—ã–≤–æ–¥**  

- **"–õ–µ–≥–∫–æ–≤–µ—Å" –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å** –∑–∞ —Å—á—ë—Ç **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏**.  
- **–ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö** (–≥—Ä–∞—Ñ–∏–∫–∞, —Ç–µ–∫—Å—Ç, –∏–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã).  
- **–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É**, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.  
